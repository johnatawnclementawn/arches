{% load static %}
{% load template_tags %}
{% load i18n %}

<ul id="search-results-list" class="search-results-ul" style="display: none;" data-bind="foreach: results, visible: true,
    attr: {'aria-label': $root.translations.searchResults}
">

    <li class="search-listing" data-bind="event: { mouseover: mouseoverInstance, mouseout: mouseoverInstance('')}, css: {'selected': selected()}">
        <p 
            class="search-listing-title" 
            data-bind="css: {'i18n-alt': $parent.alternativelanguage}"
        >
            <a class="search-candidate-title" href="#" data-bind="click: $parent.viewReport.bind($parent)">
                <i class="search-listing-icon" data-bind="css: iconclass"></i> 
                <span data-bind="text: displayname"></span>
            </a>
        </p>

        <div class="search-listing-body" data-bind="html: displaydescription">
        </div>

        <div class="search-listing-footer">
            <div style="flex-grow: 1;">
                <ul class="search-results-ul">
                    <!--ko if: provisional_resource == 'true' -->
                    <li class="search-list-item">
                        <span class="provisional-edits">
                            <i class="fa fa-exclamation-circle"></i>
                            <span data-bind="text: $root.translations.provisional"></span>
                        </span>
                    </li>
                    <!--/ko-->

                    <!--ko if: provisional_resource == 'partial' && $parent.userIsReviewer -->
                    <li class="search-list-item">
                        <span class="provisional-edits">
                            <i class="fa fa-exclamation-circle"></i>
                            <span data-bind="text: $root.translations.provisional"></span>
                        </span>
                    </li>
                    <!--/ko-->

                    <!-- ko if: !!$parent.details -->
                    <li class="search-list-item">
                        <button class="search-candidate-link" data-bind="onEnterkeyClick, onSpaceClick, click: function(){showDetails();},
                            attr: {'aria-label': $root.translations.viewResourceDetails(displayname)},
                        ">
                            <i class="fa fa-info-circle"></i>
                            <span data-bind="text: $root.translations.details"></span>
                        </button>
                    </li>
                    <!-- /ko -->

                    <!--ko if: canEdit -->
                    <li class="search-list-item">
                        <a class="search-candidate-link" href="#" data-bind="onEnterkeyClick, onSpaceClick, click: $parent.editResource.bind($parent),
                            attr: {'aria-label': $root.translations.editResource(displayname)},
                        ">
                            <i class="ion-ios-refresh-empty"></i>
                            <span data-bind="text: $root.translations.edit"></span>
                        </a>
                    </li>
                    <!--/ko-->
                    
                    <!-- ko if: !!$parent.mapFilter && point -->
                    <li class="search-list-item">
                        <button class="search-candidate-link" data-bind="click: function(){mapLinkClicked();}, 
                            attr:{'aria-label': $root.translations.viewMap},
                        ">
                            <i class="fa fa-map-marker"></i>
                            <span data-bind="text: $root.translations.map"></span>
                        </button>
                    </li>
                    <!-- /ko -->
                </ul>
            </div>

            <div>
                <ul class="search-results-ul">
                    <!--ko ifnot: $root.resourceEditorContext -->
                        <!--ko if: !!$parent.relatedResourcesManager && canRead -->
                        <li class="search-list-item">
                            <a class="search-candidate-link" href="#" data-bind="click: showrelated">
                                <i class="fa fa-code-fork"></i>
                                <span data-bind="text: $root.translations.relatedResources"></span>
                            </a>
                        </li>
                        <!--/ko-->
                    <!--/ko-->
    
                    <!--ko if: $root.resourceEditorContext -->
                        <!--ko if: relatable & $root.editingInstanceId != resourceinstanceid -->
                        <li class="search-list-item">
                            <a class="search-candidate-link" href="#" data-bind="click: function(val){relationshipcandidacy(val); showrelated()}">
                                <i class="fa fa-code-fork"></i>
                                <span data-bind="text: $root.translations.relateResource"></span>
                            </a>
                        </li>
                        <!--/ko-->
                        <!--ko if: relatable == false || $root.editingInstanceId == resourceinstanceid -->
                        <li class="search-list-item">
                            <a class="search-candidate-link unrelatable-search-result" href="#">
                                <i class="fa fa-code-fork"></i>
                                <span data-bind="text: $root.translations.cannotBeRelated"></span>
                            </a>
                        </li>
                        <!--/ko-->
                    <!--/ko-->
                </ul>
            </div>
        </div>
    </li>

</ul>
